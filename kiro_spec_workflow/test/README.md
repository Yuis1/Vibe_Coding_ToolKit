# AI IDE规则文件拷贝测试指南

本目录包含一套完整的测试方案，用于验证 `copy_rules.sh` 脚本的功能。

## 📁 测试目录结构

```
test/
├── test_copy_functionality.sh    # 自动批量测试脚本
├── test_project/                 # 测试项目目录（自动生成）
└── README.md                     # 本说明文档
```

## 🚀 测试方案：自动批量测试

**脚本文件**: `test_copy_functionality.sh`

### 功能特点
- ✅ 全自动运行，无需用户交互
- ✅ 批量测试所有核心功能
- ✅ 自动清理测试环境
- ✅ 生成详细的测试报告

### 使用方法

```bash
cd test
./test_copy_functionality.sh
```

## 📋 测试规则

### 测试脚本创建规则
- **创建位置**: 所有测试脚本必须在 `test/` 目录中创建
- **命名规范**: 以 `test_` 开头，以 `.sh` 结尾
- **权限设置**: 创建后需要设置可执行权限 `chmod +x test_script.sh`

### 测试项目路径规则
- **虚拟项目路径**: 所有测试使用统一的虚拟项目路径 `test/test_project/`
- **目录管理**: 测试开始前自动清理，测试完成后保留结果供检查
- **隔离原则**: 测试不能影响源项目文件和用户现有配置

### 测试项目录

1. **基础检查**
   - 脚本存在性和可执行权限
   - 配置文件存在性和格式
   - 源文件存在性检查

2. **功能测试**
   - 命令行模式测试：需要
   - 交互模式测试：不需要。因为AI读取终端交互目前存在问题，会导致人机交互失效。
   - IDE多选机制测试
   - 文件拷贝功能
   - 目录创建功能
   - 冲突处理测试

3. **兼容性测试**
   - 命令行模式测试
   - 单个IDE选择测试
   - 多个IDE选择测试
   - 全部IDE选择测试

### 测试报告示例

```
================================
  AI IDE规则文件拷贝功能测试
================================

测试: 脚本存在且可执行
✓ 通过

测试: 配置文件存在
✓ 通过

测试: 交互模式多选功能
✓ 通过

测试: 命令行模式
✓ 通过
...

================================
测试结果汇总:
通过: 8
失败: 0
总计: 8
```

## 🔧 环境要求

- **操作系统**: Linux / macOS / Windows (Git Bash)
- **依赖**: 无额外依赖，使用系统原生bash
- **权限**: 脚本文件需要执行权限（已自动设置）

## 📝 测试数据

所有测试都在专用的 `test/test_project/` 目录下进行，不会影响：
- ✅ 源项目文件
- ✅ 用户现有的配置文件
- ✅ 其他目录结构

## 🔄 快速开始

```bash
# 快速验证所有功能
cd test && ./test_copy_functionality.sh
```

## 📞 故障排除

如果测试失败，请检查：
1. 脚本是否有执行权限：`chmod +x *.sh`
2. 测试目录权限是否足够
3. 源文件是否存在且可读
4. 目标目录是否有写入权限
5. 交互模式是否能正确从终端读取输入

## 🎉 测试完成标准

- 自动测试：所有测试通过
- 交互功能：地址询问和IDE多选正常工作
- 文件完整性：拷贝后的文件内容正确
- 目录结构：符合预期配置结构
